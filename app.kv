# app.kv

<MenuScreen>:
    Image:
        source: 'background.jpg'
        allow_stretch: True
        keep_ratio: True
        size_hint: None, None
        size: 
            (self.parent.width, self.parent.width / self.image_ratio) \
            if self.image_ratio < self.parent.width / self.parent.height \
            else (self.parent.height * self.image_ratio, self.parent.height)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    GridLayout:
        cols:1
        GridLayout:
            row_force_default: True
            row_default_height: 70
            cols: 5
            spacing: 10
            padding: 20
            Button:
                text: 'Home'
                background_color: 0, 0, 0, 0.2  # Fully transparent background
                background_normal: ''  # Remove the default button background image
            Button:
                text: 'Weather'
                background_color: 0, 0, 0, 0.2  # Fully transparent background
                background_normal: ''  # Remove the default button background image
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'weather'
            Button:
                text: 'News'
                background_color: 0, 0, 0, 0.2  # Fully transparent background
                background_normal: ''  # Remove the default button background image
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'news'
            Button: 
                text: 'Smart Home'
                background_color: 0, 0, 0, 0.2  # Fully transparent background
                background_normal: ''  # Remove the default button background image
            Button:
                text: 'Quit'
                background_color: 0, 0, 0, 0.2  # Fully transparent background
                background_normal: ''  # Remove the default button background image
                on_press: app.stop()
        GridLayout:
            cols: 3
            spacing: 10
            padding: 20
            RoundedRectangleContainer: # Clock and Weather
                orientation: 'horizontal'
                size_hint_x: 3
                background_color: 0,0.5,0.8,0.8
                ClockWidget:
                    time_font_size: 200
                    date_font_size: 100
                    color: 1,0,0
                WeatherWidget:
                    city: "Bolton, GB"
                    api_key: "05f6c0bb861133cce2a23457c0a7c6b2"
            Label:
               
<SettingsScreen>:
    BoxLayout:
        orientation: 'horizontal'
        GridLayout:
            Button:
                text: 'File'
            Button:
                text: 'Edit'
            Button:
                text: 'Settings'
            Button:
                text: 'Quit'
                # background_color: 1, 1, 1, 0  # Fully transparent background
                # background_normal: ''  # Remove the default button background image
                on_press: app.stop()
        MenuBar:
            height: 200
    GridLayout:
        cols : 3
        spacing: 10
        padding: 20
        Button:
            text: 'Test page'
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'test'
            background_color: 1, 1, 1, 0  # Fully transparent background
            background_normal: ''  # Remove the default button background image
        Button:
            text: 'Weather'
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'weather'
            background_color: 1, 1, 1, 0  # Fully transparent background
            background_normal: ''  # Remove the default button background image
        Button:
            text: 'Quit'
            background_color: 1, 1, 1, 0  # Fully transparent background
            background_normal: ''  # Remove the default button background image
            on_press: app.stop()
        RoundedRectangleContainer: # Clock and Weather
            orientation: 'horizontal'
            size_hint_x: 3
            background_color: 1,0,0
            ClockWidget:
                time_font_size: 200
                date_font_size: 100
                color: 1,0,0
            WeatherWidget:
                city: "Bolton, GB"
                api_key: "05f6c0bb861133cce2a23457c0a7c6b2"
        
        ChartWidget:
            mqtt_server: '192.168.1.152'
            mqtt_topic: "/home/loft"
            min_range: 0
            max_range: 40
<NewsScreen>: 
    GridLayout:
        cols: 5
        padding: 10
        spacing: 10

        GridLayout:
            cols: 4
            size_hint_x: 4  # This nested grid takes up the first 4 columns
            size_hint_y: 1  # Stretches to fill the screen height
            spacing: 10
            padding: 10

            RoundedRectangleContainer:
                size_hint: 4, None  # Allow explicit height control
                height: 100  # Set a fixed height for the container
                background_color: 1, 0, 0, 1
                Label:
                    text: 'News'
                    font_size: 40
                    halign: 'left'
                    valign: 'middle'
                    text_size: self.size

            NewsWidget:
                size_hint: 4, None  # Ensure it spans the remaining space
                rss_url: "http://newsrss.bbc.co.uk/rss/newsonline_uk_edition/front_page/rss.xml"

        Button:
            text: 'Back to menu'
            size_hint_x: 1  # Disable horizontal stretching
            size_hint_y: 1  # Enable vertical stretching to fill height
            on_press:
                root.manager.transition.direction = 'right'
                root.manager.current = 'menu'



        
<WeatherScreen>:
    BoxLayout:
        Gauge:
            title: 'Loft'
            mqtt_server: '192.168.1.152'
            mqtt_topic: "/home/loft"
            min_range: 0
            max_range: 40
        NewsWidget:
            rss_url: "http://newsrss.bbc.co.uk/rss/newsonline_uk_edition/front_page/rss.xml"  # Example RSS feed
        Button:
            text: 'Back to menu'
            on_press:
                root.manager.transition.direction = 'right'
                root.manager.current = 'menu'
            